# ---------------------------------------------------------------------
# Antipay Sovereign Floor â€“ Surgical Kernel Config
# Purpose: Boot-only kernel for kexec handoff
# No modules. No network. No drivers beyond boot essentials.
# ---------------------------------------------------------------------

CONFIG_64BIT=y
CONFIG_X86_64=y
CONFIG_X86=y
CONFIG_EFI=y
CONFIG_EFI_STUB=y
CONFIG_EFI_MIXED=y
CONFIG_EFI_RUNTIME_MAP=y

# ---------------------------------------------------------------------
# Core Kernel
# ---------------------------------------------------------------------

CONFIG_INIT_ENV_ARG_LIMIT=32
CONFIG_SYSVIPC=n
CONFIG_POSIX_MQUEUE=n
CONFIG_BPF=n
CONFIG_BPF_SYSCALL=n
CONFIG_MODULES=n
CONFIG_KALLSYMS=n
CONFIG_DEBUG_KERNEL=n
CONFIG_KEXEC=y
CONFIG_KEXEC_FILE=y
CONFIG_CRASH_DUMP=n
CONFIG_RELOCATABLE=y

# ---------------------------------------------------------------------
# Memory & Scheduler
# ---------------------------------------------------------------------

CONFIG_SMP=y
CONFIG_NR_CPUS=8
CONFIG_PREEMPT_NONE=y
CONFIG_HZ_250=y
CONFIG_HZ=250
CONFIG_NO_HZ_IDLE=y

CONFIG_TRANSPARENT_HUGEPAGE=n
CONFIG_CMA=n

# ---------------------------------------------------------------------
# Filesystems (BOOT ONLY)
# ---------------------------------------------------------------------

CONFIG_TMPFS=y
CONFIG_TMPFS_POSIX_ACL=n
CONFIG_PROC_FS=y
CONFIG_SYSFS=y
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y
CONFIG_SQUASHFS=y
CONFIG_EXT4_FS=y

# ---------------------------------------------------------------------
# Block & Storage
# ---------------------------------------------------------------------

CONFIG_BLK_DEV_INITRD=y
CONFIG_BLK_DEV_NVME=y
CONFIG_ATA=y
CONFIG_ATA_PIIX=y
CONFIG_SATA_AHCI=y
CONFIG_BLK_DEV_SD=y

# ---------------------------------------------------------------------
# Console / Display
# ---------------------------------------------------------------------

CONFIG_VT=y
CONFIG_VT_CONSOLE=y
CONFIG_UNIX98_PTYS=y
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y
CONFIG_FB=y
CONFIG_FB_SIMPLE=y
CONFIG_FRAMEBUFFER_CONSOLE=y

# ---------------------------------------------------------------------
# Input (Keyboard only)
# ---------------------------------------------------------------------

CONFIG_INPUT=y
CONFIG_INPUT_KEYBOARD=y
CONFIG_KEYBOARD_ATKBD=y
CONFIG_INPUT_MOUSE=n

# ---------------------------------------------------------------------
# USB (KEYBOARD ONLY)
# ---------------------------------------------------------------------

CONFIG_USB=y
CONFIG_USB_XHCI_HCD=y
CONFIG_USB_HID=y
CONFIG_HID_GENERIC=y

# ---------------------------------------------------------------------
# Networking (HARD DISABLED)
# ---------------------------------------------------------------------

CONFIG_NET=n
CONFIG_INET=n
CONFIG_NETFILTER=n

# ---------------------------------------------------------------------
# Security (Minimal, immutable)
# ---------------------------------------------------------------------

CONFIG_SECURITY=y
CONFIG_SECURITYFS=n
CONFIG_SECURITY_SELINUX=n
CONFIG_SECURITY_APPARMOR=n
CONFIG_HARDENED_USERCOPY=y
CONFIG_FORTIFY_SOURCE=y

# ---------------------------------------------------------------------
# Crypto (For capsule verification)
# ---------------------------------------------------------------------

CONFIG_CRYPTO=y
CONFIG_CRYPTO_SHA256=y
CONFIG_CRYPTO_SHA512=y
CONFIG_CRYPTO_ED25519=y
CONFIG_CRYPTO_CURVE25519=y

# ---------------------------------------------------------------------
# Power Management
# ---------------------------------------------------------------------

CONFIG_PM=y
CONFIG_ACPI=y
CONFIG_ACPI_BUTTON=y
CONFIG_ACPI_FAN=y
CONFIG_ACPI_PROCESSOR=y

# ---------------------------------------------------------------------
# Disable Everything Else
# ---------------------------------------------------------------------

CONFIG_SOUND=n
CONFIG_MEDIA_SUPPORT=n
CONFIG_BT=n
CONFIG_WLAN=n
CONFIG_WIRELESS=n
CONFIG_CFG80211=n
CONFIG_RFKILL=n
CONFIG_VIRTUALIZATION=n
CONFIG_KVM=n
CONFIG_HYPERVISOR_GUEST=n
